build:
  stage: test
  image: yourlabs/podctl
  script: pip install . && CACHE_DIR=$(pwd)/.cache podctl build -d
  cache:
    paths:
    - .cache
    key: cache

qa:
  stage: test
  image: yourlabs/python
  script: flake8 podctl

test:
  stage: test
  image: yourlabs/python
  script: pip install -e . && cd examples && podctl test -d simple

pypi:
  stage: deploy
  image: yourlabs/python
  script: pypi-release
  only: [tags]
